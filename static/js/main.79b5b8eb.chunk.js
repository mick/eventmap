(window.webpackJsonpeventmap=window.webpackJsonpeventmap||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(7),c=n.n(r),i=(n(15),n(1)),l=n(2),u=n.n(l),s=n(8),v=n.n(s),m=n(9),f=n.n(m);n(16);var d=4;function p(e){var t=e.rawTimes,n=v()(f()(t,function(e){return e.start.unix()}),function(e){return e.start.format("YYYY-MM-DD")}),a=Object.keys(n).sort(),r=function(e){var t=n[e],a=t[0].start.format("ddd M/D"),r=t.map(function(e){return e.range.format({hideDate:!0})}).join(", ");return o.a.createElement("p",{key:"time-".concat(e)},a," | ",r)};if(a.length<=d)return a.map(r);var c=a[d-1],i=a[a.length-1],l=n[c][0].start,u=n[i][0].start;return a.slice(0,d-1).map(r).concat(o.a.createElement("p",null,"More Times from ",l.twix(u,{allDay:!0}).format()))}var h=function(e){!e.locFilt&&e.nearBy;var t=e.events.filter(function(t){var n=t.location.location.longitude+"&"+t.location.location.latitude;return e.inViewEvents.indexOf(n)>=0}).map(function(t,n){var a=t.timeslots.map(function(e){var t=u()(1e3*e.start_date),n=u()(1e3*e.end_date);return{start:t,end:n,range:t.twix(n)}});return o.a.createElement("a",{href:t.browser_url,className:"eventCard",target:"_blank",key:t.id,coord:"location"in t&&"location"in t.location&&"latitude"in t.location.location?t.location.location.longitude+"&"+t.location.location.latitude:"",onMouseEnter:function(t){e.updatedHover(t.currentTarget.getAttribute("coord"))},onMouseLeave:function(t){e.updatedHover(null)}},o.a.createElement("li",{className:"event"},o.a.createElement("div",null,o.a.createElement("h3",null,t.title),o.a.createElement("p",null,o.a.createElement("strong",null,t.location.venue)," in ",o.a.createElement("strong",null,t.location.locality)),o.a.createElement(p,{rawTimes:a}),o.a.createElement("p",{className:"eventRSVP"},"Click to RSVP"))))});return t.push(o.a.createElement("div",{className:"eventCard",key:"noevent"},o.a.createElement("li",null,o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("strong",null,"Don't see an event near you? "),o.a.createElement("br",null),o.a.createElement("a",{href:"https://events.elizabethwarren.com/?is_virtual=true"},"Join a virtual event")," or ",o.a.createElement("a",{href:"https://events.elizabethwarren.com/event/create/"},"host your own event!")))))),o.a.createElement("ul",{className:"eventList"},t)};var g=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],l=[];return null===e.locFilt&&null===e.nearby||(l=o.a.createElement(h,{events:e.events,inViewEvents:e.inViewEvents,locFilt:e.locFilt,updatedHover:function(t){return e.updatedHover(t)}})),o.a.createElement("div",{className:null!==e.locFilt||null!==e.nearby?"searchBar activeList":"searchBar"},o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.updateZip(r)},id:"zipForm"},o.a.createElement("input",{type:"text",id:"zipInput",value:r,onChange:function(e){var t=e.target.value.replace(/\D*/g,"");c(t)},placeholder:"ZIP",required:!0,minLength:"5",maxLength:"5"})),l)},b=n(4),E=n.n(b);n(17);var y=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),s=u[0],v=u[1],m=Object(a.useRef)();function f(e,t){var n=r.map(function(n){return n.properties.highlight=n.properties.locKey===e,t&&n.properties.locKey===e&&m.current.flyTo({center:n.geometry.coordinates,zoom:10}),n});c(n)}return Object(a.useEffect)(function(){E.a.accessToken="pk.eyJ1IjoibWlja3QiLCJhIjoiLXJIRS1NbyJ9.EfVT76g4A5dyuApW_zuIFQ",m.current=new E.a.Map({container:"map",style:"mapbox://styles/mickt/ck0rlk9834i721clibn70ajsa",zoom:3,hash:!0,center:[-98.5795,39.8283]}),m.current.on("load",function(t){function n(){var t=m.current.queryRenderedFeatures({layers:["event-locations","event-locations-highlight"]}).map(function(e){return e.properties.locKey});e.inViewEvents(t)}m.current.addSource("locations",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),m.current.addLayer({id:"event-locations",source:"locations",type:"symbol",layout:{"icon-allow-overlap":!0,"icon-image":"w-marker-icon","icon-anchor":"bottom","icon-size":.5},filter:["!=","highlight",!0]}),m.current.addLayer({id:"event-locations-highlight",source:"locations",type:"symbol",layout:{"icon-allow-overlap":!0,"icon-image":"w-marker-icon-highlighted","icon-anchor":"bottom","icon-size":.6},filter:["==","highlight",!0]}),m.current.on("click","event-locations",function(t){t.features&&t.features.length>0&&e.selectLoc(t.features[0].properties.locKey)}),m.current.on("mouseenter","event-locations",function(){m.current.getCanvas().style.cursor="pointer"}),m.current.on("mouseleave","event-locations",function(){m.current.getCanvas().style.cursor=""}),m.current.on("moveend",n),m.current.on("idle",n),v(!0)})},[]),Object(a.useEffect)(function(){f(e.locFilt,!0)},[e.locFilt]),Object(a.useEffect)(function(){f(e.hoverMarker,!1)},[e.hoverMarker]),Object(a.useEffect)(function(){if(!1!==s){var e={type:"FeatureCollection",features:r};m.current.getSource("locations").setData(e)}},[r,s]),Object(a.useEffect)(function(){if(null!==e.events){var t=e.events.map(function(e){return{type:"Feature",properties:{highlight:!1,locKey:e.location.location.longitude+"&"+e.location.location.latitude},geometry:{type:"Point",coordinates:[parseFloat(e.location.location.longitude),parseFloat(e.location.location.latitude)]}}});c(t)}},[e.events]),o.a.createElement("div",{id:"map"})};n(18);var j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),l=Object(i.a)(c,2),u=l[0],s=l[1],v=Object(a.useState)(null),m=Object(i.a)(v,2),f=m[0],d=m[1],p=Object(a.useState)(null),h=Object(i.a)(p,2),b=h[0],E=h[1],j=Object(a.useState)([]),w=Object(i.a)(j,2),O=w[0],k=w[1];return Object(a.useEffect)(function(){fetch("https://warren-events.s3.amazonaws.com/data/events.json").then(function(e){return e.json()}).then(function(e){return r(e)})},[]),Object(a.useEffect)(function(){null!=u&&(fetch("https://api.mobilize.us/v1/organizations/1316/events?timeslot_start=gte_now&zipcode="+u).then(function(e){return e.json()}).then(function(e){if(e.data&&e.data.length>0){var t=e.data[0];E(t.location.location.longitude+"&"+t.location.location.latitude)}}),d(null),E(null))},[u]),o.a.createElement("div",{className:"app"},o.a.createElement(g,{currZip:u,updateZip:function(e){return s(e)},events:n,inViewEvents:O,updatedHover:function(e){return d(e)},locFilt:b}),o.a.createElement(y,{currZip:u,events:n,hoverMarker:f,selectLoc:function(e){return E(e)},locFilt:b,inViewEvents:function(e){return k(e)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.79b5b8eb.chunk.js.map