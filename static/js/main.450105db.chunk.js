(window.webpackJsonpeventmap=window.webpackJsonpeventmap||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),c=(n(15),n(1)),l=n(2),u=n.n(l),s=n(8),v=n.n(s),h=n(9),d=n.n(h);n(16);var m=4;function f(e){var t=e.rawTimes,n=v()(d()(t,function(e){return e.start.unix()}),function(e){return e.start.format("YYYY-MM-DD")}),a=Object.keys(n).sort(),o=function(e){var t=n[e],a=t[0].start.format("ddd M/D"),o=t.map(function(e){return e.range.format({hideDate:!0})}).join(", ");return r.a.createElement("p",{key:"time-".concat(e)},a," | ",o)};if(a.length<=m)return a.map(o);var i=a[m-1],c=a[a.length-1],l=n[i][0].start,u=n[c][0].start;return a.slice(0,m-1).map(o).concat(r.a.createElement("p",null,"More Times from ",l.twix(u,{allDay:!0}).format()))}var g=function(e){Object(a.useLayoutEffect)(function(){if(e.highlightedEvent.id){var t=document.querySelector("a.eventCard[eventid='".concat(e.highlightedEvent.id,"']"));t&&t.scrollIntoView(!0)}},[e.highlightedEvent,e.inViewEvents]);var t=0,n=e.events.filter(function(n){return!(t>30)&&(!!e.inViewEvents[n.id]&&(t+=1,!0))}).map(function(t,n){var a=t.timeslots.map(function(e){var t=u()(1e3*e.start_date),n=u()(1e3*e.end_date);return{start:t,end:n,range:t.twix(n)}}),o="event";return e.highlightedEvent.id===t.id&&(o="event highlighted"),r.a.createElement("a",{href:t.browser_url,className:"eventCard",target:"_blank",key:t.id,eventid:t.id,onMouseEnter:function(t){e.updatedHover({id:t.currentTarget.getAttribute("eventid"),center:!1})},onMouseLeave:function(t){e.updatedHover({})}},r.a.createElement("li",{className:o},r.a.createElement("div",null,r.a.createElement("h3",null,t.title),r.a.createElement("p",null,r.a.createElement("strong",null,t.location.venue)," in ",r.a.createElement("strong",null,t.location.locality)),r.a.createElement(f,{rawTimes:a}),r.a.createElement("p",{className:"eventRSVP"},"Click to RSVP"))))});return n.push(r.a.createElement("div",{className:"eventCard",key:"noevent"},r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Don't see an event near you? "),r.a.createElement("br",null),r.a.createElement("a",{href:"https://events.elizabethwarren.com/?is_virtual=true",target:"_blank"},"Join a virtual event")," or",r.a.createElement("a",{href:"https://events.elizabethwarren.com/event/create/",target:"_blank"},"host your own event!")))))),r.a.createElement("ul",{className:"eventList"},n)};var p=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),o=n[0],i=n[1],l=[];return null===e.locFilt&&null===e.nearby||(l=r.a.createElement(g,{events:e.events,inViewEvents:e.inViewEvents,highlightedEvent:e.highlightedEvent,updatedHover:function(t){return e.updatedHover(t)}})),r.a.createElement("div",{className:null!==e.locFilt||null!==e.nearby?"searchBar activeList":"searchBar"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.updateZip(o)},id:"zipForm"},r.a.createElement("input",{type:"text",id:"zipInput",value:o,onChange:function(e){var t=e.target.value.replace(/\D*/g,"");i(t)},placeholder:"ZIP",required:!0,minLength:"5",maxLength:"5"})),l)},E=n(4),b=n.n(E);n(17);var y=function(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),o=n[0],i=n[1],l=Object(a.useState)(!1),u=Object(c.a)(l,2),s=u[0],v=u[1],h=Object(a.useRef)(),d=Object(a.useRef)();return Object(a.useEffect)(function(){b.a.accessToken="pk.eyJ1IjoibWlja3QiLCJhIjoiLXJIRS1NbyJ9.EfVT76g4A5dyuApW_zuIFQ",h.current=new b.a.Map({container:"map",style:"mapbox://styles/mickt/ck0rlk9834i721clibn70ajsa",zoom:3,hash:!0,center:[-98.5795,39.8283]}),h.current.on("load",function(t){function n(){var t=h.current.queryRenderedFeatures({layers:["event-locations","event-locations-highlight"]}),n={};t.forEach(function(e){n[e.id]=!0}),e.inViewEvents(n)}h.current.addSource("locations",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),h.current.addLayer({id:"event-locations",source:"locations",type:"symbol",layout:{"icon-allow-overlap":!0,"icon-anchor":"bottom","icon-size":.5,"icon-image":"w-marker-icon"},paint:{"icon-opacity":["match",["feature-state","highlight"],1,0,1]}}),h.current.addLayer({id:"event-locations-highlight",source:"locations",type:"symbol",layout:{"icon-allow-overlap":!0,"icon-image":"w-marker-icon-highlighted","icon-anchor":"bottom","icon-size":.6},paint:{"icon-opacity":["match",["feature-state","highlight"],1,1,0]}}),h.current.on("click","event-locations",function(t){t.features&&t.features.length>0&&(console.log(t.features[0]),e.selectEvent({id:t.features[0].id,center:t.features[0].geometry.coordinates}))}),h.current.on("mouseenter","event-locations",function(){h.current.getCanvas().style.cursor="pointer"}),h.current.on("mouseleave","event-locations",function(){h.current.getCanvas().style.cursor=""}),h.current.on("moveend",n),h.current.on("idle",n),v(!0)})},[]),Object(a.useEffect)(function(){var t,n;!1!==s&&(console.log(e.highlightedEvent),t=e.highlightedEvent.id,n=e.highlightedEvent.center,console.log("highlight",d.current,t),d.current&&h.current.setFeatureState({source:"locations",id:d.current},{highlight:0}),t&&h.current.setFeatureState({source:"locations",id:t},{highlight:1}),d.current=t,n&&h.current.flyTo({center:n,zoom:10}))},[e.highlightedEvent,s]),Object(a.useEffect)(function(){if(!1!==s){var e={type:"FeatureCollection",features:o};h.current.getSource("locations").setData(e)}},[o,s]),Object(a.useEffect)(function(){if(null!==e.events){var t=e.events.map(function(e){return{type:"Feature",id:e.id,properties:{},geometry:{type:"Point",coordinates:[parseFloat(e.location.location.longitude),parseFloat(e.location.location.latitude)]}}});i(t)}},[e.events]),r.a.createElement("div",{id:"map"})};n(18);var w=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(null),l=Object(c.a)(i,2),u=l[0],s=l[1],v=Object(a.useState)({}),h=Object(c.a)(v,2),d=h[0],m=h[1],f=Object(a.useState)({}),g=Object(c.a)(f,2),E=g[0],b=g[1];return Object(a.useEffect)(function(){fetch("https://warren-events.s3.amazonaws.com/data/events.json").then(function(e){return e.json()}).then(function(e){o(e)})},[]),Object(a.useEffect)(function(){null!=u&&(fetch("https://api.mobilize.us/v1/organizations/1316/events?timeslot_start=gte_now&zipcode="+u).then(function(e){return e.json()}).then(function(e){if(e.data&&e.data.length>0){var t=e.data[0];m({id:t.id,center:[t.location.location.longitude,t.location.location.latitude]})}}),m({}))},[u]),r.a.createElement("div",{className:"app"},r.a.createElement(p,{currZip:u,updateZip:function(e){return s(e)},events:n,inViewEvents:E,updatedHover:function(e){return m(e)},highlightedEvent:d}),r.a.createElement(y,{events:n,selectEvent:function(e){return m(e)},highlightedEvent:d,inViewEvents:function(e){return b(e)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.450105db.chunk.js.map